<!DOCTYPE html>
<html>
<head>
    <title>Scoreboard Shot Clock</title>    
    <link rel="stylesheet" type="text/css" href="scoreboard.css">   
</head>
<body style="overflow-y: hidden;">
    <div class="contentFull row" style="height: 100vh; display: flex; justify-content: center; align-items: center;" >
        <div id="shot-clock-time" class="shot-clock-large">...</div>
    </div>
    <div class="footer row">
        <span class="footer-title">Tourney Scoreboard</span>
        <span id="current-time" class="footer-time">...</span>
    </div>

    <script src="scoreboard.js"></script>
    <script type="module">
        import * as utilities from "./utilities.js";
    
		function showTime()
		{
            var currentTime = new Date();
            document.getElementById("current-time").innerHTML = currentTime.toLocaleTimeString('en-GB', { hour12: false });
        }

        function showGame(game)
        {
            document.getElementById("shot-clock-time").innerHTML = game["shotClockDisplayTime"];
        }
        
        function onWebSocketMessage(e) {
            const game = JSON.parse(e.data);
            showGame(game);
            showTime();
        }

        function onCheckWebSocket() {
            webSocket = utilities.checkWebSocket(webSocket, onWebSocketMessage, onCheckWebSocket);
        }

        var webSocket = utilities.initialiseWebSocket(onWebSocketMessage, onCheckWebSocket);
    </script>
</body>
</html>
